name: Telegram Notifications

on:
  push:
    branches: [main, master]
  pull_request:
    types: [opened, closed, reopened]
  issues:
    types: [opened, closed, reopened]
  issue_comment:
    types: [created]
  watch:
    types: [started]  # Stars
  fork:
  release:
    types: [published]

env:
  TELEGRAM_CHAT_ID: "@ivorisnoob_projects"

jobs:
  # ============================================
  # ğŸš€ Push/Commit Notification
  # ============================================
  notify-push:
    if: github.event_name == 'push'
    runs-on: ubuntu-latest
    steps:
      - name: Send Push Notification
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
            -d "chat_id=${{ env.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=ğŸµ <b>IvorMusic</b> | New Update
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          ğŸš€ <b>New commit pushed!</b>

          ï¿½ <code>${{ github.repository }}</code>
          ğŸŒ¿ Branch: <code>${{ github.ref_name }}</code>
          ğŸ‘¨â€ğŸ’» Author: <b>${{ github.event.head_commit.author.name }}</b>

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          ğŸ”— <a href='${{ github.event.head_commit.url }}'>View Changes â†’</a>"

  # ============================================
  # ğŸ”€ Pull Request Notifications
  # ============================================
  notify-pr-opened:
    if: github.event_name == 'pull_request' && github.event.action == 'opened'
    runs-on: ubuntu-latest
    steps:
      - name: Send PR Opened Notification
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
            -d "chat_id=${{ env.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=ğŸµ <b>IvorMusic</b> | Pull Request
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          ï¿½ <b>New PR opened!</b>

          ğŸ“‹ <b>${{ github.event.pull_request.title }}</b>

          ï¿½ Opened by: <b>${{ github.event.pull_request.user.login }}</b>
          ï¿½ <code>${{ github.event.pull_request.head.ref }}</code> â†’ <code>${{ github.event.pull_request.base.ref }}</code>

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          ğŸ”— <a href='${{ github.event.pull_request.html_url }}'>Review PR â†’</a>"

  notify-pr-merged:
    if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - name: Send PR Merged Notification
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
            -d "chat_id=${{ env.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=ğŸµ <b>IvorMusic</b> | Merged! ğŸŠ
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          âœ… <b>PR successfully merged!</b>

          ğŸ“‹ <b>${{ github.event.pull_request.title }}</b>

          ğŸ‘¤ Merged by: <b>${{ github.event.sender.login }}</b>
          ğŸ“Š +${{ github.event.pull_request.additions }} / -${{ github.event.pull_request.deletions }} lines

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          ğŸ”— <a href='${{ github.event.pull_request.html_url }}'>View Details â†’</a>"

  # ============================================
  # ğŸ› Issue Notifications
  # ============================================
  notify-issue-opened:
    if: github.event_name == 'issues' && github.event.action == 'opened'
    runs-on: ubuntu-latest
    steps:
      - name: Send Issue Opened Notification
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
            -d "chat_id=${{ env.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=ğŸµ <b>IvorMusic</b> | New Issue
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          ï¿½ <b>Issue reported!</b>

          ğŸ“‹ <b>${{ github.event.issue.title }}</b>

          ğŸ‘¤ Reported by: <b>${{ github.event.issue.user.login }}</b>

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          ğŸ”— <a href='${{ github.event.issue.html_url }}'>View Issue â†’</a>"

  notify-issue-closed:
    if: github.event_name == 'issues' && github.event.action == 'closed'
    runs-on: ubuntu-latest
    steps:
      - name: Send Issue Closed Notification
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
            -d "chat_id=${{ env.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=ğŸµ <b>IvorMusic</b> | Issue Resolved
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          âœ… <b>Issue closed!</b>

          ğŸ“‹ <b>${{ github.event.issue.title }}</b>

          ğŸ‘¤ Closed by: <b>${{ github.event.sender.login }}</b>

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          ğŸ”— <a href='${{ github.event.issue.html_url }}'>View Issue â†’</a>"

  # ============================================
  # ğŸ’¬ Issue Comment Notification
  # ============================================
  notify-comment:
    if: github.event_name == 'issue_comment'
    runs-on: ubuntu-latest
    steps:
      - name: Send Comment Notification
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
            -d "chat_id=${{ env.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=ğŸµ <b>IvorMusic</b> | New Comment
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          ï¿½ <b>Someone commented!</b>

          ğŸ“‹ On: <b>${{ github.event.issue.title }}</b>
          ğŸ‘¤ By: <b>${{ github.event.comment.user.login }}</b>

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          ğŸ”— <a href='${{ github.event.comment.html_url }}'>Read Comment â†’</a>"

  # ============================================
  # â­ Star Notification
  # ============================================
  notify-star:
    if: github.event_name == 'watch' && github.event.action == 'started'
    runs-on: ubuntu-latest
    steps:
      - name: Send Star Notification
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
            -d "chat_id=${{ env.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=ğŸµ <b>IvorMusic</b> | New Star! â­
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          ğŸŒŸ <b>We got a new star!</b>

          ğŸ‘¤ <b>${{ github.event.sender.login }}</b> starred the repo!

          â­ Total Stars: <b>${{ github.event.repository.stargazers_count }}</b>

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          Thank you for your support! ğŸ’œ
          ğŸ”— <a href='https://github.com/${{ github.repository }}'>Visit Repo â†’</a>"

  # ============================================
  # ğŸ´ Fork Notification
  # ============================================
  notify-fork:
    if: github.event_name == 'fork'
    runs-on: ubuntu-latest
    steps:
      - name: Send Fork Notification
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
            -d "chat_id=${{ env.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=ğŸµ <b>IvorMusic</b> | Forked! ğŸ´
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          ğŸ´ <b>Repository forked!</b>

          ğŸ‘¤ <b>${{ github.event.sender.login }}</b> forked the project!
          ğŸ“¦ Fork: <code>${{ github.event.forkee.full_name }}</code>

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          Happy coding! ğŸš€
          ğŸ”— <a href='${{ github.event.forkee.html_url }}'>View Fork â†’</a>"

  # ============================================
  # ğŸ“¦ Release Notification
  # ============================================
  notify-release:
    if: github.event_name == 'release'
    runs-on: ubuntu-latest
    steps:
      - name: Send Release Notification
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
            -d "chat_id=${{ env.TELEGRAM_CHAT_ID }}" \
            -d "parse_mode=HTML" \
            -d "text=ï¿½ <b>IvorMusic</b> | New Release! ğŸ‰
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          ğŸ“¦ <b>Version ${{ github.event.release.tag_name }}</b>

          ğŸ“‹ <b>${{ github.event.release.name }}</b>
          ğŸ‘¤ Released by: <b>${{ github.event.release.author.login }}</b>

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          ï¿½ <a href='${{ github.event.release.html_url }}'>Download Now â†’</a>"
